{"remainingRequest":"/Users/aaron/myproject/review-open-code/vue.draggable.next/node_modules/babel-loader/lib/index.js!/Users/aaron/myproject/review-open-code/vue.draggable.next/node_modules/eslint-loader/index.js??ref--13-0!/Users/aaron/myproject/review-open-code/vue.draggable.next/src/vuedraggable.js","dependencies":[{"path":"/Users/aaron/myproject/review-open-code/vue.draggable.next/src/vuedraggable.js","mtime":1669091380783},{"path":"/Users/aaron/myproject/review-open-code/vue.draggable.next/node_modules/cache-loader/dist/cjs.js","mtime":1642173220293},{"path":"/Users/aaron/myproject/review-open-code/vue.draggable.next/node_modules/babel-loader/lib/index.js","mtime":1669092100647},{"path":"/Users/aaron/myproject/review-open-code/vue.draggable.next/node_modules/eslint-loader/index.js","mtime":1642173233839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2Fhcm9uL215cHJvamVjdC9yZXZpZXctb3Blbi1jb2RlL3Z1ZS5kcmFnZ2FibGUubmV4dC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICIvVXNlcnMvYWFyb24vbXlwcm9qZWN0L3Jldmlldy1vcGVuLWNvZGUvdnVlLmRyYWdnYWJsZS5uZXh0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvYWFyb24vbXlwcm9qZWN0L3Jldmlldy1vcGVuLWNvZGUvdnVlLmRyYWdnYWJsZS5uZXh0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgU29ydGFibGUgZnJvbSAic29ydGFibGVqcyI7CmltcG9ydCB7IGluc2VydE5vZGVBdCwgcmVtb3ZlTm9kZSB9IGZyb20gIi4vdXRpbC9odG1sSGVscGVyIjsKaW1wb3J0IHsgY29uc29sZSB9IGZyb20gIi4vdXRpbC9jb25zb2xlIjsKaW1wb3J0IHsgZ2V0Q29tcG9uZW50QXR0cmlidXRlcywgY3JlYXRlU29ydGFibGVPcHRpb24sIGdldFZhbGlkU29ydGFibGVFbnRyaWVzIH0gZnJvbSAiLi9jb3JlL2NvbXBvbmVudEJ1aWxkZXJIZWxwZXIiOwppbXBvcnQgeyBjb21wdXRlQ29tcG9uZW50U3RydWN0dXJlIH0gZnJvbSAiLi9jb3JlL3JlbmRlckhlbHBlciI7CmltcG9ydCB7IGV2ZW50cyB9IGZyb20gIi4vY29yZS9zb3J0YWJsZUV2ZW50cyI7CmltcG9ydCB7IGgsIGRlZmluZUNvbXBvbmVudCwgbmV4dFRpY2sgfSBmcm9tICJ2dWUiOwoKZnVuY3Rpb24gX2VtaXQoZXZ0TmFtZSwgZXZ0RGF0YSkgewogIHZhciBfdGhpcyA9IHRoaXM7CgogIG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBfdGhpcy4kZW1pdChldnROYW1lLnRvTG93ZXJDYXNlKCksIGV2dERhdGEpOwogIH0pOwp9CgpmdW5jdGlvbiBfbWFuYWdlKGV2dE5hbWUpIHsKICB2YXIgX3RoaXMyID0gdGhpczsKCiAgcmV0dXJuIGZ1bmN0aW9uIChldnREYXRhLCBvcmlnaW5hbEVsZW1lbnQpIHsKICAgIGlmIChfdGhpczIucmVhbExpc3QgIT09IG51bGwpIHsKICAgICAgcmV0dXJuIF90aGlzMlsib25EcmFnIi5jb25jYXQoZXZ0TmFtZSldKGV2dERhdGEsIG9yaWdpbmFsRWxlbWVudCk7CiAgICB9CiAgfTsKfQoKZnVuY3Rpb24gX21hbmFnZUFuZEVtaXQoZXZ0TmFtZSkgewogIHZhciBfdGhpczMgPSB0aGlzOwoKICB2YXIgZGVsZWdhdGVDYWxsQmFjayA9IF9tYW5hZ2UuY2FsbCh0aGlzLCBldnROYW1lKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChldnREYXRhLCBvcmlnaW5hbEVsZW1lbnQpIHsKICAgIGRlbGVnYXRlQ2FsbEJhY2suY2FsbChfdGhpczMsIGV2dERhdGEsIG9yaWdpbmFsRWxlbWVudCk7CgogICAgX2VtaXQuY2FsbChfdGhpczMsIGV2dE5hbWUsIGV2dERhdGEpOwogIH07Cn0KCnZhciBkcmFnZ2luZ0VsZW1lbnQgPSBudWxsOwp2YXIgcHJvcHMgPSB7CiAgbGlzdDogewogICAgdHlwZTogQXJyYXksCiAgICByZXF1aXJlZDogZmFsc2UsCiAgICBkZWZhdWx0OiBudWxsCiAgfSwKICBtb2RlbFZhbHVlOiB7CiAgICB0eXBlOiBBcnJheSwKICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgIGRlZmF1bHQ6IG51bGwKICB9LAogIGl0ZW1LZXk6IHsKICAgIHR5cGU6IFtTdHJpbmcsIEZ1bmN0aW9uXSwKICAgIHJlcXVpcmVkOiB0cnVlCiAgfSwKICBjbG9uZTogewogICAgdHlwZTogRnVuY3Rpb24sCiAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdChvcmlnaW5hbCkgewogICAgICByZXR1cm4gb3JpZ2luYWw7CiAgICB9CiAgfSwKICB0YWc6IHsKICAgIHR5cGU6IFN0cmluZywKICAgIGRlZmF1bHQ6ICJkaXYiCiAgfSwKICBtb3ZlOiB7CiAgICB0eXBlOiBGdW5jdGlvbiwKICAgIGRlZmF1bHQ6IG51bGwKICB9LAogIGNvbXBvbmVudERhdGE6IHsKICAgIHR5cGU6IE9iamVjdCwKICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgIGRlZmF1bHQ6IG51bGwKICB9Cn07CnZhciBlbWl0cyA9IFsidXBkYXRlOm1vZGVsVmFsdWUiLCAiY2hhbmdlIl0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGV2ZW50cy5tYW5hZ2VBbmRFbWl0KSwgX3RvQ29uc3VtYWJsZUFycmF5KGV2ZW50cy5lbWl0KSkubWFwKGZ1bmN0aW9uIChldnQpIHsKICByZXR1cm4gZXZ0LnRvTG93ZXJDYXNlKCk7Cn0pKSk7CnZhciBkcmFnZ2FibGVDb21wb25lbnQgPSBkZWZpbmVDb21wb25lbnQoewogIG5hbWU6ICJkcmFnZ2FibGUiLAogIGluaGVyaXRBdHRyczogZmFsc2UsCiAgcHJvcHM6IHByb3BzLAogIGVtaXRzOiBlbWl0cywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZXJyb3I6IGZhbHNlCiAgICB9OwogIH0sCiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICB0cnkgewogICAgICB0aGlzLmVycm9yID0gZmFsc2U7CiAgICAgIHZhciAkc2xvdHMgPSB0aGlzLiRzbG90cywKICAgICAgICAgICRhdHRycyA9IHRoaXMuJGF0dHJzLAogICAgICAgICAgdGFnID0gdGhpcy50YWcsCiAgICAgICAgICBjb21wb25lbnREYXRhID0gdGhpcy5jb21wb25lbnREYXRhLAogICAgICAgICAgcmVhbExpc3QgPSB0aGlzLnJlYWxMaXN0LAogICAgICAgICAgZ2V0S2V5ID0gdGhpcy5nZXRLZXk7CiAgICAgIHZhciBjb21wb25lbnRTdHJ1Y3R1cmUgPSBjb21wdXRlQ29tcG9uZW50U3RydWN0dXJlKHsKICAgICAgICAkc2xvdHM6ICRzbG90cywKICAgICAgICB0YWc6IHRhZywKICAgICAgICByZWFsTGlzdDogcmVhbExpc3QsCiAgICAgICAgZ2V0S2V5OiBnZXRLZXkKICAgICAgfSk7CiAgICAgIHRoaXMuY29tcG9uZW50U3RydWN0dXJlID0gY29tcG9uZW50U3RydWN0dXJlOwogICAgICB2YXIgYXR0cmlidXRlcyA9IGdldENvbXBvbmVudEF0dHJpYnV0ZXMoewogICAgICAgICRhdHRyczogJGF0dHJzLAogICAgICAgIGNvbXBvbmVudERhdGE6IGNvbXBvbmVudERhdGEKICAgICAgfSk7CiAgICAgIHJldHVybiBjb21wb25lbnRTdHJ1Y3R1cmUucmVuZGVyKGgsIGF0dHJpYnV0ZXMpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIHRoaXMuZXJyb3IgPSB0cnVlOwogICAgICByZXR1cm4gaCgicHJlIiwgewogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBjb2xvcjogInJlZCIKICAgICAgICB9CiAgICAgIH0sIGVyci5zdGFjayk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMubGlzdCAhPT0gbnVsbCAmJiB0aGlzLm1vZGVsVmFsdWUgIT09IG51bGwpIHsKICAgICAgY29uc29sZS5lcnJvcigibW9kZWxWYWx1ZSBhbmQgbGlzdCBwcm9wcyBhcmUgbXV0dWFsbHkgZXhjbHVzaXZlISBQbGVhc2Ugc2V0IG9uZSBvciBhbm90aGVyLiIpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgIGlmICh0aGlzLmVycm9yKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgJGF0dHJzID0gdGhpcy4kYXR0cnMsCiAgICAgICAgJGVsID0gdGhpcy4kZWwsCiAgICAgICAgY29tcG9uZW50U3RydWN0dXJlID0gdGhpcy5jb21wb25lbnRTdHJ1Y3R1cmU7CiAgICBjb21wb25lbnRTdHJ1Y3R1cmUudXBkYXRlZCgpOwogICAgdmFyIHNvcnRhYmxlT3B0aW9ucyA9IGNyZWF0ZVNvcnRhYmxlT3B0aW9uKHsKICAgICAgJGF0dHJzOiAkYXR0cnMsCiAgICAgIGNhbGxCYWNrQnVpbGRlcjogewogICAgICAgIG1hbmFnZUFuZEVtaXQ6IGZ1bmN0aW9uIG1hbmFnZUFuZEVtaXQoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBfbWFuYWdlQW5kRW1pdC5jYWxsKF90aGlzNCwgZXZlbnQpOwogICAgICAgIH0sCiAgICAgICAgZW1pdDogZnVuY3Rpb24gZW1pdChldmVudCkgewogICAgICAgICAgcmV0dXJuIF9lbWl0LmJpbmQoX3RoaXM0LCBldmVudCk7CiAgICAgICAgfSwKICAgICAgICBtYW5hZ2U6IGZ1bmN0aW9uIG1hbmFnZShldmVudCkgewogICAgICAgICAgcmV0dXJuIF9tYW5hZ2UuY2FsbChfdGhpczQsIGV2ZW50KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgdmFyIHRhcmdldERvbUVsZW1lbnQgPSAkZWwubm9kZVR5cGUgPT09IDEgPyAkZWwgOiAkZWwucGFyZW50RWxlbWVudDsKICAgIHRoaXMuX3NvcnRhYmxlID0gbmV3IFNvcnRhYmxlKHRhcmdldERvbUVsZW1lbnQsIHNvcnRhYmxlT3B0aW9ucyk7CiAgICB0aGlzLnRhcmdldERvbUVsZW1lbnQgPSB0YXJnZXREb21FbGVtZW50OwogICAgdGFyZ2V0RG9tRWxlbWVudC5fX2RyYWdnYWJsZV9jb21wb25lbnRfXyA9IHRoaXM7CiAgfSwKICB1cGRhdGVkOiBmdW5jdGlvbiB1cGRhdGVkKCkgewogICAgdGhpcy5jb21wb25lbnRTdHJ1Y3R1cmUudXBkYXRlZCgpOwogIH0sCiAgYmVmb3JlVW5tb3VudDogZnVuY3Rpb24gYmVmb3JlVW5tb3VudCgpIHsKICAgIGlmICh0aGlzLl9zb3J0YWJsZSAhPT0gdW5kZWZpbmVkKSB0aGlzLl9zb3J0YWJsZS5kZXN0cm95KCk7CiAgfSwKICBjb21wdXRlZDogewogICAgcmVhbExpc3Q6IGZ1bmN0aW9uIHJlYWxMaXN0KCkgewogICAgICB2YXIgbGlzdCA9IHRoaXMubGlzdDsKICAgICAgcmV0dXJuIGxpc3QgPyBsaXN0IDogdGhpcy5tb2RlbFZhbHVlOwogICAgfSwKICAgIGdldEtleTogZnVuY3Rpb24gZ2V0S2V5KCkgewogICAgICB2YXIgaXRlbUtleSA9IHRoaXMuaXRlbUtleTsKCiAgICAgIGlmICh0eXBlb2YgaXRlbUtleSA9PT0gImZ1bmN0aW9uIikgewogICAgICAgIHJldHVybiBpdGVtS2V5OwogICAgICB9CgogICAgICByZXR1cm4gZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICByZXR1cm4gZWxlbWVudFtpdGVtS2V5XTsKICAgICAgfTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAkYXR0cnM6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihuZXdPcHRpb25WYWx1ZSkgewogICAgICAgIHZhciBfc29ydGFibGUgPSB0aGlzLl9zb3J0YWJsZTsKICAgICAgICBpZiAoIV9zb3J0YWJsZSkgcmV0dXJuOwogICAgICAgIGdldFZhbGlkU29ydGFibGVFbnRyaWVzKG5ld09wdGlvblZhbHVlKS5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKSwKICAgICAgICAgICAgICBrZXkgPSBfcmVmMlswXSwKICAgICAgICAgICAgICB2YWx1ZSA9IF9yZWYyWzFdOwoKICAgICAgICAgIF9zb3J0YWJsZS5vcHRpb24oa2V5LCB2YWx1ZSk7CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFVuZGVybHlpbmdWbTogZnVuY3Rpb24gZ2V0VW5kZXJseWluZ1ZtKGRvbUVsZW1lbnQpIHsKICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50U3RydWN0dXJlLmdldFVuZGVybHlpbmdWbShkb21FbGVtZW50KSB8fCBudWxsOwogICAgfSwKICAgIGdldFVuZGVybHlpbmdQb3RlbmNpYWxEcmFnZ2FibGVDb21wb25lbnQ6IGZ1bmN0aW9uIGdldFVuZGVybHlpbmdQb3RlbmNpYWxEcmFnZ2FibGVDb21wb25lbnQoaHRtRWxlbWVudCkgewogICAgICAvL1RPRE8gY2hlY2sgY2FzZSB3aGVyZSB5b3UgbmVlZCB0byBzZWUgY29tcG9uZW50IGNoaWxkcmVuCiAgICAgIHJldHVybiBodG1FbGVtZW50Ll9fZHJhZ2dhYmxlX2NvbXBvbmVudF9fOwogICAgfSwKICAgIGVtaXRDaGFuZ2VzOiBmdW5jdGlvbiBlbWl0Q2hhbmdlcyhldnQpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNS4kZW1pdCgiY2hhbmdlIiwgZXZ0KTsKICAgICAgfSk7CiAgICB9LAogICAgYWx0ZXJMaXN0OiBmdW5jdGlvbiBhbHRlckxpc3Qob25MaXN0KSB7CiAgICAgIGlmICh0aGlzLmxpc3QpIHsKICAgICAgICBvbkxpc3QodGhpcy5saXN0KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBuZXdMaXN0ID0gX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMubW9kZWxWYWx1ZSk7CgogICAgICBvbkxpc3QobmV3TGlzdCk7CiAgICAgIHRoaXMuJGVtaXQoInVwZGF0ZTptb2RlbFZhbHVlIiwgbmV3TGlzdCk7CiAgICB9LAogICAgc3BsaWNlTGlzdDogZnVuY3Rpb24gc3BsaWNlTGlzdCgpIHsKICAgICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHM7CgogICAgICAvLyBAdHMtaWdub3JlCiAgICAgIHZhciBzcGxpY2VMaXN0ID0gZnVuY3Rpb24gc3BsaWNlTGlzdChsaXN0KSB7CiAgICAgICAgcmV0dXJuIGxpc3Quc3BsaWNlLmFwcGx5KGxpc3QsIF90b0NvbnN1bWFibGVBcnJheShfYXJndW1lbnRzKSk7CiAgICAgIH07CgogICAgICB0aGlzLmFsdGVyTGlzdChzcGxpY2VMaXN0KTsKICAgIH0sCiAgICB1cGRhdGVQb3NpdGlvbjogZnVuY3Rpb24gdXBkYXRlUG9zaXRpb24ob2xkSW5kZXgsIG5ld0luZGV4KSB7CiAgICAgIHZhciB1cGRhdGVQb3NpdGlvbiA9IGZ1bmN0aW9uIHVwZGF0ZVBvc2l0aW9uKGxpc3QpIHsKICAgICAgICByZXR1cm4gbGlzdC5zcGxpY2UobmV3SW5kZXgsIDAsIGxpc3Quc3BsaWNlKG9sZEluZGV4LCAxKVswXSk7CiAgICAgIH07CgogICAgICB0aGlzLmFsdGVyTGlzdCh1cGRhdGVQb3NpdGlvbik7CiAgICB9LAogICAgZ2V0UmVsYXRlZENvbnRleHRGcm9tTW92ZUV2ZW50OiBmdW5jdGlvbiBnZXRSZWxhdGVkQ29udGV4dEZyb21Nb3ZlRXZlbnQoX3JlZjMpIHsKICAgICAgdmFyIHRvID0gX3JlZjMudG8sCiAgICAgICAgICByZWxhdGVkID0gX3JlZjMucmVsYXRlZDsKICAgICAgdmFyIGNvbXBvbmVudCA9IHRoaXMuZ2V0VW5kZXJseWluZ1BvdGVuY2lhbERyYWdnYWJsZUNvbXBvbmVudCh0byk7CgogICAgICBpZiAoIWNvbXBvbmVudCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBjb21wb25lbnQ6IGNvbXBvbmVudAogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBsaXN0ID0gY29tcG9uZW50LnJlYWxMaXN0OwogICAgICB2YXIgY29udGV4dCA9IHsKICAgICAgICBsaXN0OiBsaXN0LAogICAgICAgIGNvbXBvbmVudDogY29tcG9uZW50CiAgICAgIH07CgogICAgICBpZiAodG8gIT09IHJlbGF0ZWQgJiYgbGlzdCkgewogICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IGNvbXBvbmVudC5nZXRVbmRlcmx5aW5nVm0ocmVsYXRlZCkgfHwge307CiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGVzdGluYXRpb24pLCBjb250ZXh0KTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNvbnRleHQ7CiAgICB9LAogICAgZ2V0Vm1JbmRleEZyb21Eb21JbmRleDogZnVuY3Rpb24gZ2V0Vm1JbmRleEZyb21Eb21JbmRleChkb21JbmRleCkgewogICAgICByZXR1cm4gdGhpcy5jb21wb25lbnRTdHJ1Y3R1cmUuZ2V0Vm1JbmRleEZyb21Eb21JbmRleChkb21JbmRleCwgdGhpcy50YXJnZXREb21FbGVtZW50KTsKICAgIH0sCiAgICBvbkRyYWdTdGFydDogZnVuY3Rpb24gb25EcmFnU3RhcnQoZXZ0KSB7CiAgICAgIHRoaXMuY29udGV4dCA9IHRoaXMuZ2V0VW5kZXJseWluZ1ZtKGV2dC5pdGVtKTsKICAgICAgZXZ0Lml0ZW0uX3VuZGVybHlpbmdfdm1fID0gdGhpcy5jbG9uZSh0aGlzLmNvbnRleHQuZWxlbWVudCk7CiAgICAgIGRyYWdnaW5nRWxlbWVudCA9IGV2dC5pdGVtOwogICAgfSwKICAgIG9uRHJhZ0FkZDogZnVuY3Rpb24gb25EcmFnQWRkKGV2dCkgewogICAgICB2YXIgZWxlbWVudCA9IGV2dC5pdGVtLl91bmRlcmx5aW5nX3ZtXzsKCiAgICAgIGlmIChlbGVtZW50ID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHJlbW92ZU5vZGUoZXZ0Lml0ZW0pOwogICAgICB2YXIgbmV3SW5kZXggPSB0aGlzLmdldFZtSW5kZXhGcm9tRG9tSW5kZXgoZXZ0Lm5ld0luZGV4KTsgLy8gQHRzLWlnbm9yZQoKICAgICAgdGhpcy5zcGxpY2VMaXN0KG5ld0luZGV4LCAwLCBlbGVtZW50KTsKICAgICAgdmFyIGFkZGVkID0gewogICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgbmV3SW5kZXg6IG5ld0luZGV4CiAgICAgIH07CiAgICAgIHRoaXMuZW1pdENoYW5nZXMoewogICAgICAgIGFkZGVkOiBhZGRlZAogICAgICB9KTsKICAgIH0sCiAgICBvbkRyYWdSZW1vdmU6IGZ1bmN0aW9uIG9uRHJhZ1JlbW92ZShldnQpIHsKICAgICAgaW5zZXJ0Tm9kZUF0KHRoaXMuJGVsLCBldnQuaXRlbSwgZXZ0Lm9sZEluZGV4KTsKCiAgICAgIGlmIChldnQucHVsbE1vZGUgPT09ICJjbG9uZSIpIHsKICAgICAgICByZW1vdmVOb2RlKGV2dC5jbG9uZSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgX3RoaXMkY29udGV4dCA9IHRoaXMuY29udGV4dCwKICAgICAgICAgIG9sZEluZGV4ID0gX3RoaXMkY29udGV4dC5pbmRleCwKICAgICAgICAgIGVsZW1lbnQgPSBfdGhpcyRjb250ZXh0LmVsZW1lbnQ7IC8vIEB0cy1pZ25vcmUKCiAgICAgIHRoaXMuc3BsaWNlTGlzdChvbGRJbmRleCwgMSk7CiAgICAgIHZhciByZW1vdmVkID0gewogICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgb2xkSW5kZXg6IG9sZEluZGV4CiAgICAgIH07CiAgICAgIHRoaXMuZW1pdENoYW5nZXMoewogICAgICAgIHJlbW92ZWQ6IHJlbW92ZWQKICAgICAgfSk7CiAgICB9LAogICAgb25EcmFnVXBkYXRlOiBmdW5jdGlvbiBvbkRyYWdVcGRhdGUoZXZ0KSB7CiAgICAgIHJlbW92ZU5vZGUoZXZ0Lml0ZW0pOwogICAgICBpbnNlcnROb2RlQXQoZXZ0LmZyb20sIGV2dC5pdGVtLCBldnQub2xkSW5kZXgpOwogICAgICB2YXIgb2xkSW5kZXggPSB0aGlzLmNvbnRleHQuaW5kZXg7CiAgICAgIHZhciBuZXdJbmRleCA9IHRoaXMuZ2V0Vm1JbmRleEZyb21Eb21JbmRleChldnQubmV3SW5kZXgpOwogICAgICB0aGlzLnVwZGF0ZVBvc2l0aW9uKG9sZEluZGV4LCBuZXdJbmRleCk7CiAgICAgIHZhciBtb3ZlZCA9IHsKICAgICAgICBlbGVtZW50OiB0aGlzLmNvbnRleHQuZWxlbWVudCwKICAgICAgICBvbGRJbmRleDogb2xkSW5kZXgsCiAgICAgICAgbmV3SW5kZXg6IG5ld0luZGV4CiAgICAgIH07CiAgICAgIHRoaXMuZW1pdENoYW5nZXMoewogICAgICAgIG1vdmVkOiBtb3ZlZAogICAgICB9KTsKICAgIH0sCiAgICBjb21wdXRlRnV0dXJlSW5kZXg6IGZ1bmN0aW9uIGNvbXB1dGVGdXR1cmVJbmRleChyZWxhdGVkQ29udGV4dCwgZXZ0KSB7CiAgICAgIGlmICghcmVsYXRlZENvbnRleHQuZWxlbWVudCkgewogICAgICAgIHJldHVybiAwOwogICAgICB9CgogICAgICB2YXIgZG9tQ2hpbGRyZW4gPSBfdG9Db25zdW1hYmxlQXJyYXkoZXZ0LnRvLmNoaWxkcmVuKS5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLnN0eWxlWyJkaXNwbGF5Il0gIT09ICJub25lIjsKICAgICAgfSk7CgogICAgICB2YXIgY3VycmVudERvbUluZGV4ID0gZG9tQ2hpbGRyZW4uaW5kZXhPZihldnQucmVsYXRlZCk7CiAgICAgIHZhciBjdXJyZW50SW5kZXggPSByZWxhdGVkQ29udGV4dC5jb21wb25lbnQuZ2V0Vm1JbmRleEZyb21Eb21JbmRleChjdXJyZW50RG9tSW5kZXgpOwogICAgICB2YXIgZHJhZ2dlZEluTGlzdCA9IGRvbUNoaWxkcmVuLmluZGV4T2YoZHJhZ2dpbmdFbGVtZW50KSAhPT0gLTE7CiAgICAgIHJldHVybiBkcmFnZ2VkSW5MaXN0IHx8ICFldnQud2lsbEluc2VydEFmdGVyID8gY3VycmVudEluZGV4IDogY3VycmVudEluZGV4ICsgMTsKICAgIH0sCiAgICBvbkRyYWdNb3ZlOiBmdW5jdGlvbiBvbkRyYWdNb3ZlKGV2dCwgb3JpZ2luYWxFdmVudCkgewogICAgICB2YXIgbW92ZSA9IHRoaXMubW92ZSwKICAgICAgICAgIHJlYWxMaXN0ID0gdGhpcy5yZWFsTGlzdDsKCiAgICAgIGlmICghbW92ZSB8fCAhcmVhbExpc3QpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgdmFyIHJlbGF0ZWRDb250ZXh0ID0gdGhpcy5nZXRSZWxhdGVkQ29udGV4dEZyb21Nb3ZlRXZlbnQoZXZ0KTsKICAgICAgdmFyIGZ1dHVyZUluZGV4ID0gdGhpcy5jb21wdXRlRnV0dXJlSW5kZXgocmVsYXRlZENvbnRleHQsIGV2dCk7CgogICAgICB2YXIgZHJhZ2dlZENvbnRleHQgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuY29udGV4dCksIHt9LCB7CiAgICAgICAgZnV0dXJlSW5kZXg6IGZ1dHVyZUluZGV4CiAgICAgIH0pOwoKICAgICAgdmFyIHNlbmRFdmVudCA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZXZ0KSwge30sIHsKICAgICAgICByZWxhdGVkQ29udGV4dDogcmVsYXRlZENvbnRleHQsCiAgICAgICAgZHJhZ2dlZENvbnRleHQ6IGRyYWdnZWRDb250ZXh0CiAgICAgIH0pOwoKICAgICAgcmV0dXJuIG1vdmUoc2VuZEV2ZW50LCBvcmlnaW5hbEV2ZW50KTsKICAgIH0sCiAgICBvbkRyYWdFbmQ6IGZ1bmN0aW9uIG9uRHJhZ0VuZCgpIHsKICAgICAgZHJhZ2dpbmdFbGVtZW50ID0gbnVsbDsKICAgIH0KICB9Cn0pOwpleHBvcnQgZGVmYXVsdCBkcmFnZ2FibGVDb21wb25lbnQ7"},{"version":3,"sources":["/Users/aaron/myproject/review-open-code/vue.draggable.next/src/vuedraggable.js"],"names":["Sortable","insertNodeAt","removeNode","console","getComponentAttributes","createSortableOption","getValidSortableEntries","computeComponentStructure","events","h","defineComponent","nextTick","emit","evtName","evtData","$emit","toLowerCase","manage","originalElement","realList","manageAndEmit","delegateCallBack","call","draggingElement","props","list","type","Array","required","default","modelValue","itemKey","String","Function","clone","original","tag","move","componentData","Object","emits","map","evt","draggableComponent","name","inheritAttrs","data","error","render","$slots","$attrs","getKey","componentStructure","attributes","err","style","color","stack","created","mounted","$el","updated","sortableOptions","callBackBuilder","event","bind","targetDomElement","nodeType","parentElement","_sortable","__draggable_component__","beforeUnmount","undefined","destroy","computed","element","watch","handler","newOptionValue","forEach","key","value","option","deep","methods","getUnderlyingVm","domElement","getUnderlyingPotencialDraggableComponent","htmElement","emitChanges","alterList","onList","newList","spliceList","splice","arguments","updatePosition","oldIndex","newIndex","getRelatedContextFromMoveEvent","to","related","component","context","destination","getVmIndexFromDomIndex","domIndex","onDragStart","item","_underlying_vm_","onDragAdd","added","onDragRemove","pullMode","index","removed","onDragUpdate","from","moved","computeFutureIndex","relatedContext","domChildren","children","filter","el","currentDomIndex","indexOf","currentIndex","draggedInList","willInsertAfter","onDragMove","originalEvent","futureIndex","draggedContext","sendEvent","onDragEnd"],"mappings":"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","sourcesContent":["import Sortable from \"sortablejs\";\nimport { insertNodeAt, removeNode } from \"./util/htmlHelper\";\nimport { console } from \"./util/console\";\nimport {\n  getComponentAttributes,\n  createSortableOption,\n  getValidSortableEntries\n} from \"./core/componentBuilderHelper\";\nimport { computeComponentStructure } from \"./core/renderHelper\";\nimport { events } from \"./core/sortableEvents\";\nimport { h, defineComponent, nextTick } from \"vue\";\n\nfunction emit(evtName, evtData) {\n  nextTick(() => this.$emit(evtName.toLowerCase(), evtData));\n}\n\nfunction manage(evtName) {\n  return (evtData, originalElement) => {\n    if (this.realList !== null) {\n      return this[`onDrag${evtName}`](evtData, originalElement);\n    }\n  };\n}\n\nfunction manageAndEmit(evtName) {\n  const delegateCallBack = manage.call(this, evtName);\n  return (evtData, originalElement) => {\n    delegateCallBack.call(this, evtData, originalElement);\n    emit.call(this, evtName, evtData);\n  };\n}\n\nlet draggingElement = null;\n\nconst props = {\n  list: {\n    type: Array,\n    required: false,\n    default: null\n  },\n  modelValue: {\n    type: Array,\n    required: false,\n    default: null\n  },\n  itemKey: {\n    type: [String, Function],\n    required: true\n  },\n  clone: {\n    type: Function,\n    default: original => {\n      return original;\n    }\n  },\n  tag: {\n    type: String,\n    default: \"div\"\n  },\n  move: {\n    type: Function,\n    default: null\n  },\n  componentData: {\n    type: Object,\n    required: false,\n    default: null\n  }\n};\n\nconst emits = [\n  \"update:modelValue\",\n  \"change\",\n  ...[...events.manageAndEmit, ...events.emit].map(evt => evt.toLowerCase())\n];\n\nconst draggableComponent = defineComponent({\n  name: \"draggable\",\n\n  inheritAttrs: false,\n\n  props,\n\n  emits,\n\n  data() {\n    return {\n      error: false\n    };\n  },\n\n  render() {\n    try {\n      this.error = false;\n      const { $slots, $attrs, tag, componentData, realList, getKey } = this;\n      const componentStructure = computeComponentStructure({\n        $slots,\n        tag,\n        realList,\n        getKey\n      });\n      this.componentStructure = componentStructure;\n      const attributes = getComponentAttributes({ $attrs, componentData });\n      return componentStructure.render(h, attributes);\n    } catch (err) {\n      this.error = true;\n      return h(\"pre\", { style: { color: \"red\" } }, err.stack);\n    }\n  },\n\n  created() {\n    if (this.list !== null && this.modelValue !== null) {\n      console.error(\n        \"modelValue and list props are mutually exclusive! Please set one or another.\"\n      );\n    }\n  },\n\n  mounted() {\n    if (this.error) {\n      return;\n    }\n\n    const { $attrs, $el, componentStructure } = this;\n    componentStructure.updated();\n\n    const sortableOptions = createSortableOption({\n      $attrs,\n      callBackBuilder: {\n        manageAndEmit: event => manageAndEmit.call(this, event),\n        emit: event => emit.bind(this, event),\n        manage: event => manage.call(this, event)\n      }\n    });\n    const targetDomElement = $el.nodeType === 1 ? $el : $el.parentElement;\n    this._sortable = new Sortable(targetDomElement, sortableOptions);\n    this.targetDomElement = targetDomElement;\n    targetDomElement.__draggable_component__ = this;\n  },\n\n  updated() {\n    this.componentStructure.updated();\n  },\n\n  beforeUnmount() {\n    if (this._sortable !== undefined) this._sortable.destroy();\n  },\n\n  computed: {\n    realList() {\n      const { list } = this;\n      return list ? list : this.modelValue;\n    },\n\n    getKey() {\n      const { itemKey } = this;\n      if (typeof itemKey === \"function\") {\n        return itemKey;\n      }\n      return element => element[itemKey];\n    }\n  },\n\n  watch: {\n    $attrs: {\n      handler(newOptionValue) {\n        const { _sortable } = this;\n        if (!_sortable) return;\n        getValidSortableEntries(newOptionValue).forEach(([key, value]) => {\n          _sortable.option(key, value);\n        });\n      },\n      deep: true\n    }\n  },\n\n  methods: {\n    getUnderlyingVm(domElement) {\n      return this.componentStructure.getUnderlyingVm(domElement) || null;\n    },\n\n    getUnderlyingPotencialDraggableComponent(htmElement) {\n      //TODO check case where you need to see component children\n      return htmElement.__draggable_component__;\n    },\n\n    emitChanges(evt) {\n      nextTick(() => this.$emit(\"change\", evt));\n    },\n\n    alterList(onList) {\n      if (this.list) {\n        onList(this.list);\n        return;\n      }\n      const newList = [...this.modelValue];\n      onList(newList);\n      this.$emit(\"update:modelValue\", newList);\n    },\n\n    spliceList() {\n      // @ts-ignore\n      const spliceList = list => list.splice(...arguments);\n      this.alterList(spliceList);\n    },\n\n    updatePosition(oldIndex, newIndex) {\n      const updatePosition = list =>\n        list.splice(newIndex, 0, list.splice(oldIndex, 1)[0]);\n      this.alterList(updatePosition);\n    },\n\n    getRelatedContextFromMoveEvent({ to, related }) {\n      const component = this.getUnderlyingPotencialDraggableComponent(to);\n      if (!component) {\n        return { component };\n      }\n      const list = component.realList;\n      const context = { list, component };\n      if (to !== related && list) {\n        const destination = component.getUnderlyingVm(related) || {};\n        return { ...destination, ...context };\n      }\n      return context;\n    },\n\n    getVmIndexFromDomIndex(domIndex) {\n      return this.componentStructure.getVmIndexFromDomIndex(\n        domIndex,\n        this.targetDomElement\n      );\n    },\n\n    onDragStart(evt) {\n      this.context = this.getUnderlyingVm(evt.item);\n      evt.item._underlying_vm_ = this.clone(this.context.element);\n      draggingElement = evt.item;\n    },\n\n    onDragAdd(evt) {\n      const element = evt.item._underlying_vm_;\n      if (element === undefined) {\n        return;\n      }\n      removeNode(evt.item);\n      const newIndex = this.getVmIndexFromDomIndex(evt.newIndex);\n      // @ts-ignore\n      this.spliceList(newIndex, 0, element);\n      const added = { element, newIndex };\n      this.emitChanges({ added });\n    },\n\n    onDragRemove(evt) {\n      insertNodeAt(this.$el, evt.item, evt.oldIndex);\n      if (evt.pullMode === \"clone\") {\n        removeNode(evt.clone);\n        return;\n      }\n      const { index: oldIndex, element } = this.context;\n      // @ts-ignore\n      this.spliceList(oldIndex, 1);\n      const removed = { element, oldIndex };\n      this.emitChanges({ removed });\n    },\n\n    onDragUpdate(evt) {\n      removeNode(evt.item);\n      insertNodeAt(evt.from, evt.item, evt.oldIndex);\n      const oldIndex = this.context.index;\n      const newIndex = this.getVmIndexFromDomIndex(evt.newIndex);\n      this.updatePosition(oldIndex, newIndex);\n      const moved = { element: this.context.element, oldIndex, newIndex };\n      this.emitChanges({ moved });\n    },\n\n    computeFutureIndex(relatedContext, evt) {\n      if (!relatedContext.element) {\n        return 0;\n      }\n      const domChildren = [...evt.to.children].filter(\n        el => el.style[\"display\"] !== \"none\"\n      );\n      const currentDomIndex = domChildren.indexOf(evt.related);\n      const currentIndex = relatedContext.component.getVmIndexFromDomIndex(\n        currentDomIndex\n      );\n      const draggedInList = domChildren.indexOf(draggingElement) !== -1;\n      return draggedInList || !evt.willInsertAfter\n        ? currentIndex\n        : currentIndex + 1;\n    },\n\n    onDragMove(evt, originalEvent) {\n      const { move, realList } = this;\n      if (!move || !realList) {\n        return true;\n      }\n\n      const relatedContext = this.getRelatedContextFromMoveEvent(evt);\n      const futureIndex = this.computeFutureIndex(relatedContext, evt);\n      const draggedContext = {\n        ...this.context,\n        futureIndex\n      };\n      const sendEvent = {\n        ...evt,\n        relatedContext,\n        draggedContext\n      };\n      return move(sendEvent, originalEvent);\n    },\n\n    onDragEnd() {\n      draggingElement = null;\n    }\n  }\n});\n\nexport default draggableComponent;\n"]}]}
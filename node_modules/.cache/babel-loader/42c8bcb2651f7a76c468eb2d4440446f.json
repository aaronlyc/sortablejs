{"remainingRequest":"/Users/aaron/myproject/review-open-code/vue.draggable.next/node_modules/babel-loader/lib/index.js!/Users/aaron/myproject/review-open-code/vue.draggable.next/node_modules/eslint-loader/index.js??ref--13-0!/Users/aaron/myproject/review-open-code/vue.draggable.next/src/core/renderHelper.js","dependencies":[{"path":"/Users/aaron/myproject/review-open-code/vue.draggable.next/src/core/renderHelper.js","mtime":1669091380783},{"path":"/Users/aaron/myproject/review-open-code/vue.draggable.next/node_modules/cache-loader/dist/cjs.js","mtime":1642173220293},{"path":"/Users/aaron/myproject/review-open-code/vue.draggable.next/node_modules/babel-loader/lib/index.js","mtime":1669092100647},{"path":"/Users/aaron/myproject/review-open-code/vue.draggable.next/node_modules/eslint-loader/index.js","mtime":1642173233839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2Fhcm9uL215cHJvamVjdC9yZXZpZXctb3Blbi1jb2RlL3Z1ZS5kcmFnZ2FibGUubmV4dC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICIvVXNlcnMvYWFyb24vbXlwcm9qZWN0L3Jldmlldy1vcGVuLWNvZGUvdnVlLmRyYWdnYWJsZS5uZXh0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmxhdC1tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS51bnNjb3BhYmxlcy5mbGF0LW1hcC5qcyI7CmltcG9ydCB7IENvbXBvbmVudFN0cnVjdHVyZSB9IGZyb20gIi4vY29tcG9uZW50U3RydWN0dXJlIjsKaW1wb3J0IHsgaXNIdG1sVGFnLCBpc1RyYW5zaXRpb24gfSBmcm9tICIuLi91dGlsL3RhZ3MiOwppbXBvcnQgeyByZXNvbHZlQ29tcG9uZW50LCBUcmFuc2l0aW9uR3JvdXAgfSBmcm9tICJ2dWUiOwoKZnVuY3Rpb24gZ2V0U2xvdChzbG90cywga2V5KSB7CiAgdmFyIHNsb3RWYWx1ZSA9IHNsb3RzW2tleV07CiAgcmV0dXJuIHNsb3RWYWx1ZSA/IHNsb3RWYWx1ZSgpIDogW107Cn0KCmZ1bmN0aW9uIGNvbXB1dGVOb2RlcyhfcmVmKSB7CiAgdmFyICRzbG90cyA9IF9yZWYuJHNsb3RzLAogICAgICByZWFsTGlzdCA9IF9yZWYucmVhbExpc3QsCiAgICAgIGdldEtleSA9IF9yZWYuZ2V0S2V5OwogIHZhciBub3JtYWxpemVkTGlzdCA9IHJlYWxMaXN0IHx8IFtdOwoKICB2YXIgX21hcCA9IFsiaGVhZGVyIiwgImZvb3RlciJdLm1hcChmdW5jdGlvbiAobmFtZSkgewogICAgcmV0dXJuIGdldFNsb3QoJHNsb3RzLCBuYW1lKTsKICB9KSwKICAgICAgX21hcDIgPSBfc2xpY2VkVG9BcnJheShfbWFwLCAyKSwKICAgICAgaGVhZGVyID0gX21hcDJbMF0sCiAgICAgIGZvb3RlciA9IF9tYXAyWzFdOwoKICB2YXIgaXRlbSA9ICRzbG90cy5pdGVtOwoKICBpZiAoIWl0ZW0pIHsKICAgIHRocm93IG5ldyBFcnJvcigiZHJhZ2dhYmxlIGVsZW1lbnQgbXVzdCBoYXZlIGFuIGl0ZW0gc2xvdCIpOwogIH0KCiAgdmFyIGRlZmF1bHROb2RlcyA9IG5vcm1hbGl6ZWRMaXN0LmZsYXRNYXAoZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4KSB7CiAgICByZXR1cm4gaXRlbSh7CiAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgIGluZGV4OiBpbmRleAogICAgfSkubWFwKGZ1bmN0aW9uIChub2RlKSB7CiAgICAgIG5vZGUua2V5ID0gZ2V0S2V5KGVsZW1lbnQpOwogICAgICBub2RlLnByb3BzID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBub2RlLnByb3BzIHx8IHt9KSwge30sIHsKICAgICAgICAiZGF0YS1kcmFnZ2FibGUiOiB0cnVlCiAgICAgIH0pOwogICAgICByZXR1cm4gbm9kZTsKICAgIH0pOwogIH0pOwoKICBpZiAoZGVmYXVsdE5vZGVzLmxlbmd0aCAhPT0gbm9ybWFsaXplZExpc3QubGVuZ3RoKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIkl0ZW0gc2xvdCBtdXN0IGhhdmUgb25seSBvbmUgY2hpbGQiKTsKICB9CgogIHJldHVybiB7CiAgICBoZWFkZXI6IGhlYWRlciwKICAgIGZvb3RlcjogZm9vdGVyLAogICAgZGVmYXVsdDogZGVmYXVsdE5vZGVzCiAgfTsKfQoKZnVuY3Rpb24gZ2V0Um9vdEluZm9ybWF0aW9uKHRhZykgewogIHZhciB0cmFuc2l0aW9uID0gaXNUcmFuc2l0aW9uKHRhZyk7CiAgdmFyIGV4dGVybmFsQ29tcG9uZW50ID0gIWlzSHRtbFRhZyh0YWcpICYmICF0cmFuc2l0aW9uOwogIHJldHVybiB7CiAgICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uLAogICAgZXh0ZXJuYWxDb21wb25lbnQ6IGV4dGVybmFsQ29tcG9uZW50LAogICAgdGFnOiBleHRlcm5hbENvbXBvbmVudCA/IHJlc29sdmVDb21wb25lbnQodGFnKSA6IHRyYW5zaXRpb24gPyBUcmFuc2l0aW9uR3JvdXAgOiB0YWcKICB9Owp9CgpmdW5jdGlvbiBjb21wdXRlQ29tcG9uZW50U3RydWN0dXJlKF9yZWYyKSB7CiAgdmFyICRzbG90cyA9IF9yZWYyLiRzbG90cywKICAgICAgdGFnID0gX3JlZjIudGFnLAogICAgICByZWFsTGlzdCA9IF9yZWYyLnJlYWxMaXN0LAogICAgICBnZXRLZXkgPSBfcmVmMi5nZXRLZXk7CiAgdmFyIG5vZGVzID0gY29tcHV0ZU5vZGVzKHsKICAgICRzbG90czogJHNsb3RzLAogICAgcmVhbExpc3Q6IHJlYWxMaXN0LAogICAgZ2V0S2V5OiBnZXRLZXkKICB9KTsKICB2YXIgcm9vdCA9IGdldFJvb3RJbmZvcm1hdGlvbih0YWcpOwogIHJldHVybiBuZXcgQ29tcG9uZW50U3RydWN0dXJlKHsKICAgIG5vZGVzOiBub2RlcywKICAgIHJvb3Q6IHJvb3QsCiAgICByZWFsTGlzdDogcmVhbExpc3QKICB9KTsKfQoKZXhwb3J0IHsgY29tcHV0ZUNvbXBvbmVudFN0cnVjdHVyZSB9Ow=="},{"version":3,"sources":["/Users/aaron/myproject/review-open-code/vue.draggable.next/src/core/renderHelper.js"],"names":["ComponentStructure","isHtmlTag","isTransition","resolveComponent","TransitionGroup","getSlot","slots","key","slotValue","computeNodes","$slots","realList","getKey","normalizedList","map","name","header","footer","item","Error","defaultNodes","flatMap","element","index","node","props","length","default","getRootInformation","tag","transition","externalComponent","computeComponentStructure","nodes","root"],"mappings":"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","sourcesContent":["import { ComponentStructure } from \"./componentStructure\";\nimport { isHtmlTag, isTransition } from \"../util/tags\";\nimport { resolveComponent, TransitionGroup } from \"vue\";\n\nfunction getSlot(slots, key) {\n  const slotValue = slots[key];\n  return slotValue ? slotValue() : [];\n}\n\nfunction computeNodes({ $slots, realList, getKey }) {\n  const normalizedList = realList || [];\n  const [header, footer] = [\"header\", \"footer\"].map(name =>\n    getSlot($slots, name)\n  );\n  const { item } = $slots;\n  if (!item) {\n    throw new Error(\"draggable element must have an item slot\");\n  }\n  const defaultNodes = normalizedList.flatMap((element, index) =>\n    item({ element, index }).map(node => {\n      node.key = getKey(element);\n      node.props = { ...(node.props || {}), \"data-draggable\": true };\n      return node;\n    })\n  );\n  if (defaultNodes.length !== normalizedList.length) {\n    throw new Error(\"Item slot must have only one child\");\n  }\n  return {\n    header,\n    footer,\n    default: defaultNodes\n  };\n}\n\nfunction getRootInformation(tag) {\n  const transition = isTransition(tag);\n  const externalComponent = !isHtmlTag(tag) && !transition;\n  return {\n    transition,\n    externalComponent,\n    tag: externalComponent\n      ? resolveComponent(tag)\n      : transition\n      ? TransitionGroup\n      : tag\n  };\n}\n\nfunction computeComponentStructure({ $slots, tag, realList, getKey }) {\n  const nodes = computeNodes({ $slots, realList, getKey });\n  const root = getRootInformation(tag);\n  return new ComponentStructure({ nodes, root, realList });\n}\n\nexport { computeComponentStructure };\n"]}]}